(()=>{var e={};e.id=8279,e.ids=[8279],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15079:(e,t,s)=>{"use strict";s.d(t,{bq:()=>u,eb:()=>f,gC:()=>x,l6:()=>c,yv:()=>p});var r=s(60687),a=s(43210),i=s(28695),n=s(61662),d=s(89743),o=s(58450),l=s(4780);let c=i.bL;i.YJ;let p=i.WT,u=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(i.l9,{ref:a,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,(0,r.jsx)(i.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=i.l9.displayName;let m=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.PP,{ref:s,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(d.A,{className:"h-4 w-4"})}));m.displayName=i.PP.displayName;let h=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.wn,{ref:s,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}));h.displayName=i.wn.displayName;let x=a.forwardRef(({className:e,children:t,position:s="popper",...a},n)=>(0,r.jsx)(i.ZL,{children:(0,r.jsxs)(i.UC,{ref:n,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[(0,r.jsx)(m,{}),(0,r.jsx)(i.LM,{className:(0,l.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(h,{})]})}));x.displayName=i.UC.displayName,a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.JU,{ref:s,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=i.JU.displayName;let f=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(i.q7,{ref:a,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})}),(0,r.jsx)(i.p4,{children:t})]}));f.displayName=i.q7.displayName,a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.wv,{ref:s,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.wv.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19359:(e,t,s)=>{Promise.resolve().then(s.bind(s,87487))},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27479:(e,t,s)=>{"use strict";s.d(t,{d:()=>w});var r=s(60687),a=s(43210),i=s(70569),n=s(98599),d=s(11273),o=s(65551),l=s(83721),c=s(18853),p=s(3416),u="Switch",[m,h]=(0,d.A)(u),[x,f]=m(u),y=a.forwardRef((e,t)=>{let{__scopeSwitch:s,name:d,checked:l,defaultChecked:c,required:u,disabled:m,value:h="on",onCheckedChange:f,form:y,...j}=e,[g,N]=a.useState(null),w=(0,n.s)(t,e=>N(e)),k=a.useRef(!1),P=!g||y||!!g.closest("form"),[R=!1,C]=(0,o.i)({prop:l,defaultProp:c,onChange:f});return(0,r.jsxs)(x,{scope:s,checked:R,disabled:m,children:[(0,r.jsx)(p.sG.button,{type:"button",role:"switch","aria-checked":R,"aria-required":u,"data-state":v(R),"data-disabled":m?"":void 0,disabled:m,value:h,...j,ref:w,onClick:(0,i.m)(e.onClick,e=>{C(e=>!e),P&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),P&&(0,r.jsx)(b,{control:g,bubbles:!k.current,name:d,value:h,checked:R,required:u,disabled:m,form:y,style:{transform:"translateX(-100%)"}})]})});y.displayName=u;var j="SwitchThumb",g=a.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,i=f(j,s);return(0,r.jsx)(p.sG.span,{"data-state":v(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});g.displayName=j;var b=e=>{let{control:t,checked:s,bubbles:i=!0,...n}=e,d=a.useRef(null),o=(0,l.Z)(s),p=(0,c.X)(t);return a.useEffect(()=>{let e=d.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==s&&t){let r=new Event("click",{bubbles:i});t.call(e,s),e.dispatchEvent(r)}},[o,s,i]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:d,style:{...e.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function v(e){return e?"checked":"unchecked"}var N=s(4780);let w=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(y,{className:(0,N.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:(0,r.jsx)(g,{className:(0,N.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));w.displayName=y.displayName},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},37553:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>l});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),d=s(30893),o={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(t,o);let l={children:["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,54787)),"E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\checkout\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,54431)),"E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\checkout\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},39907:(e,t,s)=>{"use strict";s.d(t,{w:()=>c});var r=s(60687),a=s(43210),i=s(3416),n="horizontal",d=["horizontal","vertical"],o=a.forwardRef((e,t)=>{var s;let{decorative:a,orientation:o=n,...l}=e,c=(s=o,d.includes(s))?o:n;return(0,r.jsx)(i.sG.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...l,ref:t})});o.displayName="Separator";var l=s(4780);let c=a.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...a},i)=>(0,r.jsx)(o,{ref:i,decorative:s,orientation:t,className:(0,l.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a}));c.displayName=o.displayName},44493:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d,wL:()=>p});var r=s(60687),a=s(43210),i=s(4780);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let p=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));p.displayName="CardFooter"},54787:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\TIO\\\\Tionat-Nutrition-Hub\\\\src\\\\app\\\\checkout\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\checkout\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},80039:(e,t,s)=>{Promise.resolve().then(s.bind(s,54787))},81630:e=>{"use strict";e.exports=require("http")},87487:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ed});var r=s(60687),a=s(43210),i=s(16189),n=s(27605),d=s(63442),o=s(45880),l=s(29523),c=s(44493),p=s(39907),u=s(89667),m=s(80013),h=s(21352),x=s(82160),f=s(75535),y=s(29867),j=s(85814),g=s.n(j),b=s(70569),v=s(98599),N=s(11273),w=s(3416),k=s(72942),P=s(65551),R=s(43),C=s(18853),q=s(83721),A=s(46059),O="Radio",[E,I]=(0,N.A)(O),[M,F]=E(O),T=a.forwardRef((e,t)=>{let{__scopeRadio:s,name:i,checked:n=!1,required:d,disabled:o,value:l="on",onCheck:c,form:p,...u}=e,[m,h]=a.useState(null),x=(0,v.s)(t,e=>h(e)),f=a.useRef(!1),y=!m||p||!!m.closest("form");return(0,r.jsxs)(M,{scope:s,checked:n,disabled:o,children:[(0,r.jsx)(w.sG.button,{type:"button",role:"radio","aria-checked":n,"data-state":_(n),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:x,onClick:(0,b.m)(e.onClick,e=>{n||c?.(),y&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),y&&(0,r.jsx)(G,{control:m,bubbles:!f.current,name:i,value:l,checked:n,required:d,disabled:o,form:p,style:{transform:"translateX(-100%)"}})]})});T.displayName=O;var D="RadioIndicator",S=a.forwardRef((e,t)=>{let{__scopeRadio:s,forceMount:a,...i}=e,n=F(D,s);return(0,r.jsx)(A.C,{present:a||n.checked,children:(0,r.jsx)(w.sG.span,{"data-state":_(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:t})})});S.displayName=D;var G=e=>{let{control:t,checked:s,bubbles:i=!0,...n}=e,d=a.useRef(null),o=(0,q.Z)(s),l=(0,C.X)(t);return a.useEffect(()=>{let e=d.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==s&&t){let r=new Event("click",{bubbles:i});t.call(e,s),e.dispatchEvent(r)}},[o,s,i]),(0,r.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:d,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function _(e){return e?"checked":"unchecked"}var z=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],L="RadioGroup",[Z,Y]=(0,N.A)(L,[k.RG,I]),J=(0,k.RG)(),H=I(),[U,B]=Z(L),V=a.forwardRef((e,t)=>{let{__scopeRadioGroup:s,name:a,defaultValue:i,value:n,required:d=!1,disabled:o=!1,orientation:l,dir:c,loop:p=!0,onValueChange:u,...m}=e,h=J(s),x=(0,R.jH)(c),[f,y]=(0,P.i)({prop:n,defaultProp:i,onChange:u});return(0,r.jsx)(U,{scope:s,name:a,required:d,disabled:o,value:f,onValueChange:y,children:(0,r.jsx)(k.bL,{asChild:!0,...h,orientation:l,dir:x,loop:p,children:(0,r.jsx)(w.sG.div,{role:"radiogroup","aria-required":d,"aria-orientation":l,"data-disabled":o?"":void 0,dir:x,...m,ref:t})})})});V.displayName=L;var $="RadioGroupItem",W=a.forwardRef((e,t)=>{let{__scopeRadioGroup:s,disabled:i,...n}=e,d=B($,s),o=d.disabled||i,l=J(s),c=H(s),p=a.useRef(null),u=(0,v.s)(t,p),m=d.value===n.value,h=a.useRef(!1);return a.useEffect(()=>{let e=e=>{z.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,r.jsx)(k.q7,{asChild:!0,...l,focusable:!o,active:m,children:(0,r.jsx)(T,{disabled:o,required:d.required,checked:m,...c,...n,name:d.name,ref:u,onCheck:()=>d.onValueChange(n.value),onKeyDown:(0,b.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,b.m)(n.onFocus,()=>{h.current&&p.current?.click()})})})});W.displayName=$;var X=a.forwardRef((e,t)=>{let{__scopeRadioGroup:s,...a}=e,i=H(s);return(0,r.jsx)(S,{...i,...a,ref:t})});X.displayName="RadioGroupIndicator";var K=s(73256),Q=s(4780);let ee=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(V,{className:(0,Q.cn)("grid gap-2",e),...t,ref:s}));ee.displayName=V.displayName;let et=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(W,{ref:s,className:(0,Q.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(X,{className:"flex items-center justify-center",children:(0,r.jsx)(K.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}));et.displayName=W.displayName;var es=s(30474),er=s(15079),ea=s(27479),ei=s(43619);let en=o.Ik({name:o.Yj().min(2,{message:"Name must be at least 2 characters."}),address:o.Yj().min(5,{message:"Address is required."}),city:o.Yj().min(2,{message:"City is required."}),pincode:o.Yj().length(6,{message:"Pincode must be 6 digits."}),phone:o.Yj().length(10,{message:"Phone number must be 10 digits."}),paymentMethod:o.k5(["COD","RAZORPAY"],{required_error:"Please select a payment method."})});function ed(){let{items:e,subtotal:t,clearCart:s,discountAmount:o,coupon:j,total:b}=(0,h._)(),{user:v,isUserLoading:N}=(0,x.useAuth)(),w=(0,x.useFirestore)(),k=(0,i.useRouter)(),{toast:P}=(0,y.dj)(),[R,C]=(0,a.useState)(!1),[q,A]=(0,a.useState)(!1),O=(0,x.useMemoFirebase)(()=>w&&v?(0,f.doc)(w,"users",v.uid):null,[w,v]),{data:E,isLoading:I}=(0,x.useDoc)(O),{register:M,handleSubmit:F,formState:{errors:T},watch:D,setValue:S,trigger:G}=(0,n.mN)({resolver:(0,d.u)(en),defaultValues:{paymentMethod:"COD"}}),_=D("paymentMethod"),z=async t=>{if(v&&w){C(!0);try{let r=(0,f.doc)((0,f.collection)(w,"orders")),a=r.id,i=0,n=0;if(q&&E?.loyaltyPoints){let e=E.loyaltyPoints/10;i=Math.min(e,b),n=Math.ceil(10*i)}let d=b-i,l=Math.floor(d/100),c={id:a,userId:v.uid,orderDate:(0,f.serverTimestamp)(),totalAmount:d,status:"Pending",shippingAddress:{name:t.name,address:t.address,city:t.city,pincode:t.pincode,phone:t.phone},orderItems:e.map(e=>({productId:e.product.id,name:e.product.name,price:e.product.price,quantity:e.quantity,image:e.product.imageUrl})),paymentMethod:t.paymentMethod,discountApplied:o+i,couponCode:j?j.code:null},p=(0,f.writeBatch)(w);p.set(r,c);let u=(0,f.doc)(w,`users/${v.uid}/orders`,a);if(p.set(u,c),j&&j.id){let e=(0,f.doc)(w,"coupons",j.id);p.update(e,{usedCount:(0,f.increment)(1)})}let m=(0,f.doc)((0,f.collection)(w,`users/${v.uid}/notifications`));if(p.set(m,{title:"Order Placed",body:`Your order #${a.slice(0,6)} has been successfully placed.`,type:"order",isRead:!1,createdAt:(0,f.serverTimestamp)(),link:`/order-confirmation?orderId=${a}`}),O){let e=l;n>0&&(e-=n),p.update(O,{loyaltyPoints:(0,f.increment)(e)})}if(await p.commit(),"COD"===t.paymentMethod){s(),k.push(`/order-confirmation?orderId=${a}`);return}if("RAZORPAY"===t.paymentMethod){P({title:"Razorpay Configuration",description:"Online payment requires a backend to generate Order ID. Please use COD for client-only mode.",variant:"destructive"}),C(!1);return}}catch(e){console.error("Checkout Error:",e),P({title:"Order Failed",description:e.message||"Could not place order.",variant:"destructive"}),C(!1)}}},L=async t=>{if(0===e.length){P({title:"Empty Cart",description:"You cannot place an order with an empty cart.",variant:"destructive"}),k.push("/");return}await z(t)};return N||I?(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsx)("main",{className:"container mx-auto px-4 py-8 text-center",children:(0,r.jsx)("p",{children:"Loading user information..."})})}):v?(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-headline mb-6",children:"Checkout"}),(0,r.jsxs)("form",{onSubmit:F(L),className:"grid gap-8 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{className:"font-headline",children:"Shipping Information"})}),(0,r.jsxs)(c.Wu,{className:"space-y-4",children:[E?.addresses&&E.addresses.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)(m.J,{htmlFor:"saved-address",children:"Select Saved Address"}),(0,r.jsxs)(er.l6,{onValueChange:e=>{let[t,s,r]=e.split(",").map(e=>e.trim());S("address",t||""),s&&S("city",s),r&&S("pincode",r)},children:[(0,r.jsx)(er.bq,{id:"saved-address",children:(0,r.jsx)(er.yv,{placeholder:"Choose a saved address"})}),(0,r.jsx)(er.gC,{children:E.addresses.map((e,t)=>(0,r.jsx)(er.eb,{value:e,children:e},t))})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Or fill in the details below."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.J,{htmlFor:"name",children:"Full Name"}),(0,r.jsx)(u.p,{id:"name",...M("name")}),T.name&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:T.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.J,{htmlFor:"address",children:"Address"}),(0,r.jsx)(u.p,{id:"address",...M("address")}),T.address&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:T.address.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(m.J,{htmlFor:"city",children:"City"}),(0,r.jsx)(u.p,{id:"city",...M("city")}),T.city&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:T.city.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.J,{htmlFor:"pincode",children:"Pincode"}),(0,r.jsx)(u.p,{id:"pincode",...M("pincode")}),T.pincode&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:T.pincode.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.J,{htmlFor:"phone",children:"Phone Number"}),(0,r.jsx)(u.p,{id:"phone",type:"tel",...M("phone")}),T.phone&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:T.phone.message})]})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{className:"font-headline",children:"Payment Method"})}),(0,r.jsxs)(c.Wu,{children:[(0,r.jsxs)(ee,{defaultValue:"COD",onValueChange:e=>{S("paymentMethod",e),G("paymentMethod")},className:"grid gap-4",children:[(0,r.jsxs)(m.J,{htmlFor:"COD",className:"flex items-center gap-4 rounded-md border p-4 cursor-pointer hover:bg-accent has-[[data-state=checked]]:border-primary",children:[(0,r.jsx)(et,{value:"COD",id:"COD"}),(0,r.jsxs)("div",{className:"grid gap-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Cash on Delivery"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pay with cash upon delivery."})]})]}),(0,r.jsxs)(m.J,{htmlFor:"RAZORPAY",className:"flex items-center gap-4 rounded-md border p-4 cursor-pointer hover:bg-accent has-[[data-state=checked]]:border-primary",children:[(0,r.jsx)(et,{value:"RAZORPAY",id:"RAZORPAY"}),(0,r.jsxs)("div",{className:"flex-1 grid gap-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Pay Online"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pay with UPI, Cards, Netbanking etc."})]}),(0,r.jsx)(es.default,{src:"https://api.razorpay.com/static/assets/logo/rzp-pr-bg.svg",alt:"Razorpay",width:80,height:20})]})]}),T.paymentMethod&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:T.paymentMethod.message})]})]})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(c.Zp,{className:"sticky top-24",children:[(0,r.jsx)(c.aR,{children:(0,r.jsx)(c.ZB,{className:"font-headline",children:"Order Summary"})}),(0,r.jsxs)(c.Wu,{className:"space-y-4",children:[(0,r.jsx)("ul",{className:"space-y-2 max-h-48 overflow-y-auto",children:e.map(e=>(0,r.jsxs)("li",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{className:"flex-1 pr-2 truncate",children:[e.product.name," x ",e.quantity]}),(0,r.jsx)("span",{children:(e.product.price*e.quantity).toFixed(2)})]},e.product.id))}),(0,r.jsx)(p.w,{}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Subtotal"}),(0,r.jsx)("span",{children:t.toFixed(2)})]}),o>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,r.jsxs)("span",{children:["Discount (",j?.code,")"]}),(0,r.jsxs)("span",{children:["- ",o.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Shipping"}),(0,r.jsx)("span",{children:"Free"})]}),E?.loyaltyPoints&&E.loyaltyPoints>0&&(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(ea.d,{id:"redeem-points",checked:q,onCheckedChange:A}),(0,r.jsxs)(m.J,{htmlFor:"redeem-points",className:"text-sm cursor-pointer flex items-center",children:[(0,r.jsx)(ei.A,{className:"w-4 h-4 mr-1 text-yellow-500"}),"Use ",E.loyaltyPoints," Points"]})]}),q&&(0,r.jsxs)("span",{className:"text-sm text-green-600",children:["- ",Math.min(E.loyaltyPoints/10,b).toFixed(2)]})]}),(0,r.jsx)(p.w,{}),(0,r.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsx)("span",{children:(q&&E?.loyaltyPoints?Math.max(0,b-E.loyaltyPoints/10):b).toFixed(2)})]}),(0,r.jsx)(l.$,{type:"submit",className:"w-full",size:"lg",disabled:R,children:R?"Processing...":"COD"===_?"Place Order (COD)":"Proceed to Pay"}),(0,r.jsx)("p",{className:"text-xs text-center text-muted-foreground mt-2",children:"By placing this order, you agree to our terms of service."})]})]})})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-headline mb-6",children:"Please Log In"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-8",children:"You need to be logged in to proceed to checkout."}),(0,r.jsx)(l.$,{asChild:!0,children:(0,r.jsx)(g(),{href:"/login?redirect=/checkout",children:"Login"})})]})})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,5136,1658,474,8353,9117],()=>s(37553));module.exports=r})();