(()=>{var e={};e.id=4005,e.ids=[4005],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11516:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},23666:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var r=t(60687),a=t(30474),i=t(85814),n=t.n(i),l=t(29523),o=t(44493),d=t(39907),c=t(18646),x=t(54052),u=t(57207),m=t(21352),p=t(16189),h=t(82160),f=t(43210),v=t(75535),j=t(59721),g=t(23184);function N({products:e}){return(0,r.jsxs)(j.FN,{opts:{align:"start",loop:!0,skipSnaps:!1,slidesToScroll:"auto"},className:"w-full",children:[(0,r.jsx)(j.Wk,{children:e.map(e=>(0,r.jsx)(j.A7,{className:"basis-1/2 md:basis-1/3 lg:basis-1/5",children:(0,r.jsx)("div",{className:"p-1",children:(0,r.jsx)(g.A,{product:e})})},e.id))}),(0,r.jsx)(j.Q8,{className:"hidden sm:flex"}),(0,r.jsx)(j.Oj,{className:"hidden sm:flex"})]})}var b=t(89667),y=t(29867),w=t(20742),k=t(78726),C=t(11516);function E(){let{subtotal:e,applyCoupon:s,removeCoupon:t,coupon:a}=(0,m._)(),i=(0,h.useFirestore)(),{toast:n}=(0,y.dj)(),[o,d]=(0,f.useState)(""),[c,x]=(0,f.useState)(!1),u=async()=>{if(o.trim()&&i){x(!0);try{let t=(0,v.query)((0,v.collection)(i,"coupons"),(0,v.where)("code","==",o.toUpperCase().trim()),(0,v.where)("isActive","==",!0)),r=await (0,v.getDocs)(t);if(r.empty){n({title:"Invalid Coupon",description:"This code does not exist or is inactive.",variant:"destructive"}),x(!1);return}let a=r.docs[0].data(),l={...a,id:r.docs[0].id},c=new Date;if((a.expiryDate.toDate?a.expiryDate.toDate():new Date(a.expiryDate))<c){n({title:"Expired Coupon",description:"This coupon code has expired.",variant:"destructive"}),x(!1);return}if(a.usageLimit&&(a.usedCount||0)>=a.usageLimit){n({title:"Limit Reached",description:"This coupon has reached its maximum usage limit.",variant:"destructive"}),x(!1);return}if(e<a.minOrderValue){n({title:"Condition Not Met",description:`Minimum order value of ₹${a.minOrderValue} required.`,variant:"destructive"}),x(!1);return}s(l),d("")}catch(e){console.error("Error applying coupon:",e),n({title:"Error",description:"Failed to validate coupon.",variant:"destructive"})}finally{x(!1)}}};return a?(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary/30 border border-green-200/50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"h-4 w-4 text-green-500"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-green-600",children:["Code ",(0,r.jsx)("strong",{children:a.code})," applied!"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"PERCENTAGE"===a.discountType?`${a.discountValue}% OFF`:`₹${a.discountValue} OFF`})]})]}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 hover:bg-destructive/10 hover:text-destructive",children:(0,r.jsx)(k.A,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(w.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(b.p,{placeholder:"Enter promo code",value:o,onChange:e=>d(e.target.value),className:"pl-9 h-9",onKeyDown:e=>"Enter"===e.key&&u()})]}),(0,r.jsx)(l.$,{onClick:u,disabled:!o||c||0===e,variant:"outline",size:"sm",className:"h-9",children:c?(0,r.jsx)(C.A,{className:"h-4 w-4 animate-spin"}):"Apply"})]})}var A=t(46657);function P(){let{items:e}=(0,m._)();(0,h.useFirestore)();let[s,t]=(0,f.useState)([]),[a,i]=(0,f.useState)(!1);return((0,f.useMemo)(()=>e.map(e=>e.product.id),[e]),a||0===s.length)?null:(0,r.jsxs)("div",{className:"mt-12",children:[(0,r.jsx)("h2",{className:"text-xl md:text-2xl font-headline font-semibold mb-6",children:"You might also like"}),(0,r.jsx)(N,{products:s})]})}function q(){let{items:e,updateQuantity:s,removeFromCart:t,subtotal:i,clearCart:h,discountAmount:f,total:v}=(0,m._)(),j=(0,p.useRouter)();return 0===e.length?(0,r.jsx)("div",{className:"min-h-screen bg-background flex flex-col",children:(0,r.jsxs)("main",{className:"container mx-auto px-4 py-16 flex-1 flex flex-col items-center justify-center text-center",children:[(0,r.jsx)("div",{className:"bg-secondary/30 p-8 rounded-full mb-6",children:(0,r.jsx)("div",{className:"relative w-40 h-40",children:(0,r.jsx)(a.default,{src:"https://cdn-icons-png.flaticon.com/512/11329/11329060.png",alt:"Empty Cart",fill:!0,className:"object-contain opacity-80"})})}),(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-headline mb-3",children:"Your Cart is Empty"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-8 max-w-sm mx-auto",children:"Looks like you haven't added anything to your cart yet. Explore our fresh products and start ordering!"}),(0,r.jsx)(l.$,{asChild:!0,size:"lg",className:"rounded-xl px-8 font-bold shadow-lg shadow-primary/20",children:(0,r.jsx)(n(),{href:"/",children:"Start Shopping"})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-headline",children:"Your Cart"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:h,children:"Clear Cart"})]}),(0,r.jsxs)("div",{className:"grid gap-8 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[e.map(({product:e,quantity:i})=>(0,r.jsx)(o.Zp,{children:(0,r.jsxs)(o.Wu,{className:"flex items-center gap-4 p-4",children:[(0,r.jsx)("div",{className:"relative w-16 h-16 md:w-20 md:h-20 rounded-md overflow-hidden shrink-0",children:e.imageUrl&&(0,r.jsx)(a.default,{src:e.imageUrl,alt:e.name,fill:!0,className:"object-cover"})}),(0,r.jsxs)("div",{className:"flex-1 grid gap-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm md:text-base leading-tight",children:e.name}),(0,r.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:e.price.toFixed(2)}),(0,r.jsxs)("div",{className:"flex md:hidden items-center gap-2 mt-2",children:[(0,r.jsx)(l.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>s(e.id,i-1),disabled:i<=1,children:(0,r.jsx)(c.A,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"font-bold w-4 text-center",children:i}),(0,r.jsx)(l.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>s(e.id,i+1),children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"items-center gap-2 mx-4 hidden md:flex",children:[(0,r.jsx)(l.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>s(e.id,i-1),disabled:i<=1,children:(0,r.jsx)(c.A,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"font-bold w-4 text-center",children:i}),(0,r.jsx)(l.$,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>s(e.id,i+1),children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,r.jsx)("p",{className:"font-semibold text-base",children:(e.price*i).toFixed(2)}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive h-8 w-8",onClick:()=>t(e.id),children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]})]})},e.id)),(0,r.jsx)(P,{})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{className:"bg-secondary/30 pb-4",children:[(0,r.jsx)(o.ZB,{className:"font-headline text-lg",children:"Bill Details"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-white/50 p-2 rounded-lg border border-border/50",children:[(0,r.jsx)("div",{className:"h-4 w-4 bg-green-100 text-green-700 rounded-full flex items-center justify-center font-bold",children:"₹"}),"You are saving ₹",(.2*i+f).toFixed(0)," on this order"]})]}),(0,r.jsxs)(o.Wu,{className:"space-y-3 pt-4",children:[(0,r.jsxs)("div",{className:"mb-4 space-y-2",children:[i>=500?(0,r.jsxs)("p",{className:"text-xs text-green-600 font-bold flex items-center gap-1",children:[(0,r.jsx)("span",{className:"bg-green-100 p-1 rounded-full",children:"\uD83C\uDF89"}),"You've unlocked FREE Shipping!"]}):(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Add ",(0,r.jsxs)("span",{className:"text-primary font-bold",children:["₹",(500-i).toFixed(0)]})," more for ",(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"FREE Shipping"})]}),(0,r.jsx)(A.k,{value:Math.min(i/500*100,100),className:"h-2"})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(E,{})}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,r.jsx)("span",{children:"Item Total"}),(0,r.jsxs)("span",{className:"text-foreground",children:["₹",i.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,r.jsx)("span",{className:"flex items-center gap-1 decoration-dotted underline",children:"Delivery Fee"}),(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"FREE"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,r.jsx)("span",{children:"Handling Charge"}),(0,r.jsx)("span",{className:"text-foreground",children:"₹2.00"})]}),f>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm font-medium text-green-600",children:[(0,r.jsx)("span",{children:"Coupon Discount"}),(0,r.jsxs)("span",{children:["- ₹",f.toFixed(2)]})]}),(0,r.jsx)(d.w,{}),(0,r.jsxs)("div",{className:"bg-background border border-border/50 rounded-xl p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-xs font-bold",children:"Tip your delivery partner"}),(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground",children:"100% goes to them"})]}),(0,r.jsx)("div",{className:"flex gap-2",children:[10,20,30].map(e=>(0,r.jsxs)(l.$,{variant:"outline",size:"sm",className:"h-7 text-xs rounded-full border-dashed",children:["₹",e]},e))})]}),(0,r.jsx)(d.w,{}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-lg",children:"To Pay"}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"font-bold text-xl",children:["₹",(v+2).toFixed(2)]}),(0,r.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Incl. all taxes"})]})]})]}),(0,r.jsx)(o.wL,{className:"flex-col gap-2 pt-0 pb-6 px-6",children:(0,r.jsx)(l.$,{className:"w-full h-12 text-lg font-bold rounded-xl shadow-lg shadow-primary/20",size:"lg",onClick:()=>{j.push("/checkout")},children:"Click to Pay"})})]})})]})]})})}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33029:(e,s,t)=>{Promise.resolve().then(t.bind(t,70905))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},39907:(e,s,t)=>{"use strict";t.d(s,{w:()=>c});var r=t(60687),a=t(43210),i=t(3416),n="horizontal",l=["horizontal","vertical"],o=a.forwardRef((e,s)=>{var t;let{decorative:a,orientation:o=n,...d}=e,c=(t=o,l.includes(t))?o:n;return(0,r.jsx)(i.sG.div,{"data-orientation":c,...a?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:s})});o.displayName="Separator";var d=t(4780);let c=a.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...a},i)=>(0,r.jsx)(o,{ref:i,decorative:t,orientation:s,className:(0,d.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...a}));c.displayName=o.displayName},46657:(e,s,t)=>{"use strict";t.d(s,{k:()=>b});var r=t(60687),a=t(43210),i=t(11273),n=t(3416),l="Progress",[o,d]=(0,i.A)(l),[c,x]=o(l),u=a.forwardRef((e,s)=>{var t,a;let{__scopeProgress:i,value:l=null,max:o,getValueLabel:d=h,...x}=e;(o||0===o)&&!j(o)&&console.error((t=`${o}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=j(o)?o:100;null===l||g(l,u)||console.error((a=`${l}`,`Invalid prop \`value\` of value \`${a}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=g(l,u)?l:null,p=v(m)?d(m,u):void 0;return(0,r.jsx)(c,{scope:i,value:m,max:u,children:(0,r.jsx)(n.sG.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":v(m)?m:void 0,"aria-valuetext":p,role:"progressbar","data-state":f(m,u),"data-value":m??void 0,"data-max":u,...x,ref:s})})});u.displayName=l;var m="ProgressIndicator",p=a.forwardRef((e,s)=>{let{__scopeProgress:t,...a}=e,i=x(m,t);return(0,r.jsx)(n.sG.div,{"data-state":f(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...a,ref:s})});function h(e,s){return`${Math.round(e/s*100)}%`}function f(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function v(e){return"number"==typeof e}function j(e){return v(e)&&!isNaN(e)&&e>0}function g(e,s){return v(e)&&!isNaN(e)&&e<=s&&e>=0}p.displayName=m;var N=t(4780);let b=a.forwardRef(({className:e,value:s,...t},a)=>(0,r.jsx)(u,{ref:a,className:(0,N.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:(0,r.jsx)(p,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));b.displayName=u.displayName},55511:e=>{"use strict";e.exports=require("crypto")},55777:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=t(65239),a=t(48088),i=t(88170),n=t.n(i),l=t(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d={children:["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,70905)),"E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\cart\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,54431)),"E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\cart\\page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},57207:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69477:(e,s,t)=>{Promise.resolve().then(t.bind(t,23666))},70905:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\TIO\\\\Tionat-Nutrition-Hub\\\\src\\\\app\\\\cart\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\TIO\\Tionat-Nutrition-Hub\\src\\app\\cart\\page.tsx","default")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,5136,1658,474,8225,9117,7875],()=>t(55777));module.exports=r})();