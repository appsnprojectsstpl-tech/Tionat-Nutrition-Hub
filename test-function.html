<!DOCTYPE html>
<html>
<head>
    <title>Test Firebase Function</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFunctions, httpsCallable } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js';

        const firebaseConfig = {
            projectId: "studio-4862173023-78909",
            appId: "1:730068458941:web:85f1267fc8c37acd2e46d4",
            apiKey: "AIzaSyCcHLVogi12ZhUwExDFu574WNfdozvUk00",
            authDomain: "studio-4862173023-78909.firebaseapp.com",
            measurementId: "",
            messagingSenderId: "730068458941"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const functions = getFunctions(app, 'us-central1');

        window.testCreateOrder = async function() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            try {
                // Login first
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                console.log('Logged in as:', userCredential.user.email);
                document.getElementById('result').innerHTML = 'Logged in as: ' + userCredential.user.email + '<br>';
                
                // Call createOrder
                const createOrderFn = httpsCallable(functions, 'createOrder');
                const result = await createOrderFn({
                    items: [
                        { productId: 'test-product-id', quantity: 1 }
                    ],
                    shippingAddress: {
                        name: 'Test User',
                        address: '123 Test St',
                        city: 'Test City',
                        pincode: '123456',
                        phone: '1234567890'
                    },
                    paymentMethod: 'COD'
                });
                
                console.log('Success:', result);
                document.getElementById('result').innerHTML += 'SUCCESS: ' + JSON.stringify(result.data, null, 2);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('result').innerHTML += 'ERROR: ' + error.code + ' - ' + error.message;
            }
        };
    </script>
</head>
<body>
    <h1>Test createOrder Function</h1>
    <div>
        <label>Email: <input type="email" id="email" value="test@example.com"></label><br>
        <label>Password: <input type="password" id="password" value="Password123!"></label><br>
        <button onclick="testCreateOrder()">Test Create Order</button>
    </div>
    <pre id="result"></pre>
</body>
</html>
