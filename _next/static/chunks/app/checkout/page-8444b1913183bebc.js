(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{5272:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ed});var r=a(95155),s=a(12115),n=a(35695),i=a(62177),o=a(90221),d=a(55594),c=a(17911),l=a(30285),u=a(66695),m=a(29100),p=a(62523),h=a(85057),f=a(89342),x=a(40768),y=a(35317),g=a(81427),v=a(87481),j=a(6874),b=a.n(j),N=a(85185),w=a(6101),C=a(46081),k=a(63540),S=a(89196),R=a(5845),A=a(94315),E=a(11275),P=a(45503),O=a(28905),T="Radio",[I,M]=(0,C.A)(T),[F,_]=I(T),D=s.forwardRef((e,t)=>{let{__scopeRadio:a,name:n,checked:i=!1,required:o,disabled:d,value:c="on",onCheck:l,form:u,...m}=e,[p,h]=s.useState(null),f=(0,w.s)(t,e=>h(e)),x=s.useRef(!1),y=!p||u||!!p.closest("form");return(0,r.jsxs)(F,{scope:a,checked:i,disabled:d,children:[(0,r.jsx)(k.sG.button,{type:"button",role:"radio","aria-checked":i,"data-state":V(i),"data-disabled":d?"":void 0,disabled:d,value:c,...m,ref:f,onClick:(0,N.m)(e.onClick,e=>{i||null==l||l(),y&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),y&&(0,r.jsx)(z,{control:p,bubbles:!x.current,name:n,value:c,checked:i,required:o,disabled:d,form:u,style:{transform:"translateX(-100%)"}})]})});D.displayName=T;var L="RadioIndicator",q=s.forwardRef((e,t)=>{let{__scopeRadio:a,forceMount:s,...n}=e,i=_(L,a);return(0,r.jsx)(O.C,{present:s||i.checked,children:(0,r.jsx)(k.sG.span,{"data-state":V(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})})});q.displayName=L;var z=e=>{let{control:t,checked:a,bubbles:n=!0,...i}=e,o=s.useRef(null),d=(0,P.Z)(a),c=(0,E.X)(t);return s.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==a&&t){let r=new Event("click",{bubbles:n});t.call(e,a),e.dispatchEvent(r)}},[d,a,n]),(0,r.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function V(e){return e?"checked":"unchecked"}var J=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Y="RadioGroup",[Z,G]=(0,C.A)(Y,[S.RG,M]),U=(0,S.RG)(),B=M(),[H,K]=Z(Y),W=s.forwardRef((e,t)=>{let{__scopeRadioGroup:a,name:s,defaultValue:n,value:i,required:o=!1,disabled:d=!1,orientation:c,dir:l,loop:u=!0,onValueChange:m,...p}=e,h=U(a),f=(0,A.jH)(l),[x,y]=(0,R.i)({prop:i,defaultProp:n,onChange:m});return(0,r.jsx)(H,{scope:a,name:s,required:o,disabled:d,value:x,onValueChange:y,children:(0,r.jsx)(S.bL,{asChild:!0,...h,orientation:c,dir:f,loop:u,children:(0,r.jsx)(k.sG.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":d?"":void 0,dir:f,...p,ref:t})})})});W.displayName=Y;var X="RadioGroupItem",Q=s.forwardRef((e,t)=>{let{__scopeRadioGroup:a,disabled:n,...i}=e,o=K(X,a),d=o.disabled||n,c=U(a),l=B(a),u=s.useRef(null),m=(0,w.s)(t,u),p=o.value===i.value,h=s.useRef(!1);return s.useEffect(()=>{let e=e=>{J.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,r.jsx)(S.q7,{asChild:!0,...c,focusable:!d,active:p,children:(0,r.jsx)(D,{disabled:d,required:o.required,checked:p,...l,...i,name:o.name,ref:m,onCheck:()=>o.onValueChange(i.value),onKeyDown:(0,N.m)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,N.m)(i.onFocus,()=>{var e;h.current&&(null==(e=u.current)||e.click())})})})});Q.displayName=X;var $=s.forwardRef((e,t)=>{let{__scopeRadioGroup:a,...s}=e,n=B(a);return(0,r.jsx)(q,{...n,...s,ref:t})});$.displayName="RadioGroupIndicator";var ee=a(70154),et=a(59434);let ea=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(W,{className:(0,et.cn)("grid gap-2",a),...s,ref:t})});ea.displayName=W.displayName;let er=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(Q,{ref:t,className:(0,et.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:(0,r.jsx)($,{className:"flex items-center justify-center",children:(0,r.jsx)(ee.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});er.displayName=Q.displayName;var es=a(66766),en=a(59409),ei=a(87358);let eo=d.Ik({name:d.Yj().min(2,{message:"Name must be at least 2 characters."}),address:d.Yj().min(5,{message:"Address is required."}),city:d.Yj().min(2,{message:"City is required."}),pincode:d.Yj().length(6,{message:"Pincode must be 6 digits."}),phone:d.Yj().length(10,{message:"Phone number must be 10 digits."}),paymentMethod:d.k5(["COD","RAZORPAY"],{required_error:"Please select a payment method."})});function ed(){let{items:e,subtotal:t,clearCart:a,discountAmount:d,coupon:j,total:N}=(0,f._)(),{user:w,isUserLoading:C}=(0,x.useAuth)(),k=(0,x.useFirestore)(),S=(0,n.useRouter)(),{toast:R}=(0,v.dj)(),[A,E]=(0,s.useState)(!1),P=(0,x.useMemoFirebase)(()=>k&&w?(0,y.doc)(k,"users",w.uid):null,[k,w]),{data:O,isLoading:T}=(0,x.useDoc)(P),{register:I,handleSubmit:M,formState:{errors:F},watch:_,setValue:D,trigger:L}=(0,i.mN)({resolver:(0,o.u)(eo),defaultValues:{paymentMethod:"COD"}}),q=_("paymentMethod");(0,s.useEffect)(()=>{let e=document.createElement("script");return e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,document.body.appendChild(e),()=>{document.body.removeChild(e)}},[]),(0,s.useEffect)(()=>{if(O){if(D("name","".concat(O.firstName," ").concat(O.lastName)),O.addresses&&O.addresses.length>0){let[e,t,a]=O.addresses[0].split(",").map(e=>e.trim());D("address",e||""),t&&D("city",t),a&&D("pincode",a)}O.phoneNumber&&D("phone",O.phoneNumber)}},[O,D]);let z=(0,x.useFunctions)(),V=async t=>{if(w&&z){E(!0);try{let r=(0,g.Qg)(z,"createOrder"),{data:s}=await r({items:e.map(e=>({productId:e.product.id,quantity:e.quantity,variantId:"default"})),shippingAddress:{name:t.name,address:t.address,city:t.city,pincode:t.pincode,phone:t.phone},paymentMethod:t.paymentMethod}),{success:n,orderId:i,gatewayOrderId:o,totalAmount:d}=s;if(!n)throw Error("Order creation failed on server.");if("COD"===t.paymentMethod){a(),S.push("/order-confirmation?orderId=".concat(i));return}if("RAZORPAY"===t.paymentMethod){let e={key:ei.env.NEXT_PUBLIC_RAZORPAY_KEY_ID,amount:(100*d).toString(),currency:"INR",name:"Tionat Nutrition Hub",description:"Order Payment",order_id:o,handler:async function(e){try{let t=(0,g.Qg)(z,"verifyRazorpayPayment");await t({orderId:i,paymentId:e.razorpay_payment_id,signature:e.razorpay_signature}),a(),S.push("/order-confirmation?orderId=".concat(i))}catch(e){console.error("Verification failed",e),R({title:"Payment Verification Failed",description:"Contact support if money was deducted.",variant:"destructive"})}},prefill:{name:t.name,email:w.email||"",contact:t.phone},theme:{color:"#FF7849"},modal:{ondismiss:function(){E(!1),R({title:"Payment Cancelled",description:"You cancelled the payment process."})}}},r=new window.Razorpay(e);r.on("payment.failed",function(e){E(!1),console.error("Payment Failed",e.error),R({title:"Payment Failed",description:e.error.description||"Payment could not be completed.",variant:"destructive"})}),r.open()}}catch(t){console.error("Checkout Error:",t);let e="An unexpected error occurred. Please try again.";"functions/not-found"===t.code?e="One of the items in your cart is no longer available. Please review your cart and try again.":"functions/failed-precondition"===t.code?e="There was an issue with an item in your cart, it might be out of stock or the price has changed. Please review your cart and try again.":t.message&&(e=t.message),R({title:"Order Failed",description:e,variant:"destructive"}),E(!1)}}},J=async t=>{if(0===e.length){R({title:"Empty Cart",description:"You cannot place an order with an empty cart.",variant:"destructive"}),S.push("/");return}await V(t)};return C||T?(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsx)("main",{className:"container mx-auto px-4 py-8 text-center",children:(0,r.jsx)("p",{children:"Loading user information..."})})}):w?(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-headline mb-6",children:"Checkout"}),(0,r.jsxs)("form",{onSubmit:M(J),className:"grid gap-8 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(u.Zp,{children:[(0,r.jsx)(u.aR,{children:(0,r.jsx)(u.ZB,{className:"font-headline",children:"Shipping Information"})}),(0,r.jsxs)(u.Wu,{className:"space-y-4",children:[(null==O?void 0:O.addresses)&&O.addresses.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"saved-address",children:"Select Saved Address"}),(0,r.jsxs)(en.l6,{onValueChange:e=>{let[t,a,r]=e.split(",").map(e=>e.trim());D("address",t||""),a&&D("city",a),r&&D("pincode",r)},children:[(0,r.jsx)(en.bq,{id:"saved-address",children:(0,r.jsx)(en.yv,{placeholder:"Choose a saved address"})}),(0,r.jsx)(en.gC,{children:O.addresses.map((e,t)=>(0,r.jsx)(en.eb,{value:e,children:e},t))})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Or fill in the details below."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"name",children:"Full Name"}),(0,r.jsx)(p.p,{id:"name",...I("name")}),F.name&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"address",children:"Address"}),(0,r.jsx)(p.p,{id:"address",...I("address")}),F.address&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.address.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"city",children:"City"}),(0,r.jsx)(p.p,{id:"city",...I("city")}),F.city&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.city.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"pincode",children:"Pincode"}),(0,r.jsx)(p.p,{id:"pincode",...I("pincode")}),F.pincode&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.pincode.message})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.J,{htmlFor:"phone",children:"Phone Number"}),(0,r.jsx)(p.p,{id:"phone",type:"tel",...I("phone")}),F.phone&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.phone.message})]})]})]}),(0,r.jsxs)(u.Zp,{children:[(0,r.jsx)(u.aR,{children:(0,r.jsx)(u.ZB,{className:"font-headline",children:"Payment Method"})}),(0,r.jsxs)(u.Wu,{children:[(0,r.jsxs)(ea,{defaultValue:"COD",onValueChange:e=>{D("paymentMethod",e),L("paymentMethod")},className:"grid gap-4",children:[(0,r.jsxs)(h.J,{htmlFor:"COD",className:"flex items-center gap-4 rounded-md border p-4 cursor-pointer hover:bg-accent has-[[data-state=checked]]:border-primary",children:[(0,r.jsx)(er,{value:"COD",id:"COD"}),(0,r.jsxs)("div",{className:"grid gap-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Cash on Delivery"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pay with cash upon delivery."})]})]}),(0,r.jsxs)(h.J,{htmlFor:"RAZORPAY",className:"flex items-center gap-4 rounded-md border p-4 cursor-pointer hover:bg-accent has-[[data-state=checked]]:border-primary",children:[(0,r.jsx)(er,{value:"RAZORPAY",id:"RAZORPAY"}),(0,r.jsxs)("div",{className:"flex-1 grid gap-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Pay Online"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pay with UPI, Cards, Netbanking etc."})]}),(0,r.jsx)(es.default,{src:"https://api.razorpay.com/static/assets/logo/rzp-pr-bg.svg",alt:"Razorpay",width:80,height:20})]})]}),F.paymentMethod&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:F.paymentMethod.message})]})]})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(u.Zp,{className:"sticky top-24",children:[(0,r.jsx)(u.aR,{children:(0,r.jsx)(u.ZB,{className:"font-headline",children:"Order Summary"})}),(0,r.jsxs)(u.Wu,{className:"space-y-4",children:[(0,r.jsx)("ul",{className:"space-y-2 max-h-48 overflow-y-auto",children:e.map(e=>(0,r.jsxs)("li",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{className:"flex-1 pr-2 truncate",children:[e.product.name," x ",e.quantity]}),(0,r.jsx)("span",{children:(e.product.price*e.quantity).toFixed(2)})]},e.product.id))}),(0,r.jsx)(m.w,{}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Subtotal"}),(0,r.jsx)("span",{children:t.toFixed(2)})]}),d>0&&(0,r.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,r.jsxs)("span",{children:["Discount (",null==j?void 0:j.code,")"]}),(0,r.jsxs)("span",{children:["- ",d.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Shipping"}),(0,r.jsx)("span",{children:"Free"})]}),(0,r.jsx)(m.w,{}),(0,r.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsx)("span",{children:N.toFixed(2)})]}),(0,r.jsx)(l.$,{type:"submit",className:"w-full",size:"lg",disabled:A,children:A?"Processing...":"COD"===q?"Place Order (COD) - ₹".concat(N.toFixed(2)):"Proceed to Pay - ₹".concat(N.toFixed(2))}),(0,r.jsx)("p",{className:"text-xs text-center text-muted-foreground mt-2",children:"By placing this order, you agree to our terms of service."})]})]})})]})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)(c.j,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold font-headline mb-6",children:"Please Log In"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-8",children:"You need to be logged in to proceed to checkout."}),(0,r.jsx)(l.$,{asChild:!0,children:(0,r.jsx)(b(),{href:"/login?redirect=/checkout",children:"Login"})})]})]})}},15121:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]])},18186:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},29100:(e,t,a)=>{"use strict";a.d(t,{w:()=>l});var r=a(95155),s=a(12115),n=a(63540),i="horizontal",o=["horizontal","vertical"],d=s.forwardRef((e,t)=>{var a;let{decorative:s,orientation:d=i,...c}=e,l=(a=d,o.includes(a))?d:i;return(0,r.jsx)(n.sG.div,{"data-orientation":l,...s?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"},...c,ref:t})});d.displayName="Separator";var c=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...i}=e;return(0,r.jsx)(d,{ref:t,decorative:n,orientation:s,className:(0,c.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...i})});l.displayName=d.displayName},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,r:()=>d});var r=a(95155),s=a(12115),n=a(66634),i=a(74466),o=a(59434);let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:i,asChild:c=!1,...l}=e,u=c?n.DX:"button";return(0,r.jsx)(u,{className:(0,o.cn)(d({variant:s,size:i,className:a})),ref:t,...l})});c.displayName="Button"},35695:(e,t,a)=>{"use strict";var r=a(18999);a.o(r,"notFound")&&a.d(t,{notFound:function(){return r.notFound}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},51362:(e,t,a)=>{"use strict";a.d(t,{D:()=>d,N:()=>c});var r=a(12115),s=["light","dark"],n="(prefers-color-scheme: dark)",i=r.createContext(void 0),o={setTheme:e=>{},themes:[]},d=()=>{var e;return null!=(e=r.useContext(i))?e:o},c=e=>r.useContext(i)?e.children:r.createElement(u,{...e}),l=["light","dark"],u=e=>{let{forcedTheme:t,disableTransitionOnChange:a=!1,enableSystem:o=!0,enableColorScheme:d=!0,storageKey:c="theme",themes:u=l,defaultTheme:x=o?"system":"light",attribute:y="data-theme",value:g,children:v,nonce:j}=e,[b,N]=r.useState(()=>p(c,x)),[w,C]=r.useState(()=>p(c)),k=g?Object.values(g):u,S=r.useCallback(e=>{let t=e;if(!t)return;"system"===e&&o&&(t=f());let r=g?g[t]:t,n=a?h():null,i=document.documentElement;if("class"===y?(i.classList.remove(...k),r&&i.classList.add(r)):r?i.setAttribute(y,r):i.removeAttribute(y),d){let e=s.includes(x)?x:null,a=s.includes(t)?t:e;i.style.colorScheme=a}null==n||n()},[]),R=r.useCallback(e=>{let t="function"==typeof e?e(e):e;N(t);try{localStorage.setItem(c,t)}catch(e){}},[t]),A=r.useCallback(e=>{C(f(e)),"system"===b&&o&&!t&&S("system")},[b,t]);r.useEffect(()=>{let e=window.matchMedia(n);return e.addListener(A),A(e),()=>e.removeListener(A)},[A]),r.useEffect(()=>{let e=e=>{e.key===c&&R(e.newValue||x)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[R]),r.useEffect(()=>{S(null!=t?t:b)},[t,b]);let E=r.useMemo(()=>({theme:b,setTheme:R,forcedTheme:t,resolvedTheme:"system"===b?w:b,themes:o?[...u,"system"]:u,systemTheme:o?w:void 0}),[b,R,t,w,o,u]);return r.createElement(i.Provider,{value:E},r.createElement(m,{forcedTheme:t,disableTransitionOnChange:a,enableSystem:o,enableColorScheme:d,storageKey:c,themes:u,defaultTheme:x,attribute:y,value:g,children:v,attrs:k,nonce:j}),v)},m=r.memo(e=>{let{forcedTheme:t,storageKey:a,attribute:i,enableSystem:o,enableColorScheme:d,defaultTheme:c,value:l,attrs:u,nonce:m}=e,p="system"===c,h="class"===i?"var d=document.documentElement,c=d.classList;".concat("c.remove(".concat(u.map(e=>"'".concat(e,"'")).join(","),")"),";"):"var d=document.documentElement,n='".concat(i,"',s='setAttribute';"),f=d?(s.includes(c)?c:null)?"if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'".concat(c,"'"):"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=l?l[e]:e,n=t?e+"|| ''":"'".concat(r,"'"),o="";return d&&a&&!t&&s.includes(e)&&(o+="d.style.colorScheme = '".concat(e,"';")),"class"===i?t||r?o+="c.add(".concat(n,")"):o+="null":r&&(o+="d[s](n,".concat(n,")")),o},y=t?"!function(){".concat(h).concat(x(t),"}()"):o?"!function(){try{".concat(h,"var e=localStorage.getItem('").concat(a,"');if('system'===e||(!e&&").concat(p,")){var t='").concat(n,"',m=window.matchMedia(t);if(m.media!==t||m.matches){").concat(x("dark"),"}else{").concat(x("light"),"}}else if(e){").concat(l?"var x=".concat(JSON.stringify(l),";"):"").concat(x(l?"x[e]":"e",!0),"}").concat(p?"":"else{"+x(c,!1,!1)+"}").concat(f,"}catch(e){}}()"):"!function(){try{".concat(h,"var e=localStorage.getItem('").concat(a,"');if(e){").concat(l?"var x=".concat(JSON.stringify(l),";"):"").concat(x(l?"x[e]":"e",!0),"}else{").concat(x(c,!1,!1),";}").concat(f,"}catch(t){}}();");return r.createElement("script",{nonce:m,dangerouslySetInnerHTML:{__html:y}})}),p=(e,t)=>{let a;try{a=localStorage.getItem(e)||void 0}catch(e){}return a||t},h=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},f=e=>(e||(e=window.matchMedia(n)),e.matches?"dark":"light")},59409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>x,gC:()=>f,l6:()=>l,yv:()=>u});var r=a(95155),s=a(12115),n=a(11031),i=a(79556),o=a(77381),d=a(10518),c=a(59434);let l=n.bL;n.YJ;let u=n.WT,m=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(n.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[s,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});p.displayName=n.PP.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=n.wn.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,position:i="popper",...o}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...o,children:[(0,r.jsx)(p,{}),(0,r.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(h,{})]})})});f.displayName=n.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=n.JU.displayName;let x=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(n.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:s})]})});x.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.wv.displayName},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>d,Zp:()=>i,aR:()=>o,wL:()=>u});var r=a(95155),s=a(12115),n=a(59434);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});o.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});l.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},72534:(e,t,a)=>{Promise.resolve().then(a.bind(a,5272))},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var r=a(12115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function l(e){c=o(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},89342:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>d,_:()=>c});var r=a(95155),s=a(12115),n=a(87481),i=a(40768);let o=(0,s.createContext)(void 0),d=e=>{let{children:t}=e,{toast:a}=(0,n.dj)(),{user:d,isUserLoading:c}=(0,i.useAuth)(),[l,u]=(0,s.useState)(()=>{try{let e=window.localStorage.getItem("cart");return e?JSON.parse(e):[]}catch(e){return[]}}),[m,p]=(0,s.useState)(()=>{try{let e=window.localStorage.getItem("coupon");return e?JSON.parse(e):null}catch(e){return null}});(0,s.useEffect)(()=>{try{window.localStorage.setItem("cart",JSON.stringify(l))}catch(e){}},[l]),(0,s.useEffect)(()=>{try{m?window.localStorage.setItem("coupon",JSON.stringify(m)):window.localStorage.removeItem("coupon")}catch(e){}},[m]),(0,s.useEffect)(()=>{},[d,c]);let h=e=>{u(t=>t.filter(t=>t.product.id!==e)),a({title:"Item removed",description:"The item has been removed from your cart.",variant:"destructive"})},f=l.reduce((e,t)=>e+t.quantity,0),x=l.reduce((e,t)=>e+t.product.price*t.quantity,0),y=0;if(m)if(x<m.minOrderValue)y=0;else if("PERCENTAGE"===m.discountType){let e=x*m.discountValue/100;y=m.maxDiscount?Math.min(e,m.maxDiscount):e}else y=m.discountValue;let g=Math.max(0,x-y);return(0,r.jsx)(o.Provider,{value:{items:l,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u(a=>a.find(t=>t.product.id===e.id)?a.map(a=>a.product.id===e.id?{...a,quantity:a.quantity+t}:a):[...a,{product:e,quantity:t}])},removeFromCart:h,updateQuantity:(e,t)=>{if(t<=0)return void h(e);u(a=>a.map(a=>a.product.id===e?{...a,quantity:t}:a))},clearCart:()=>{u([]),p(null)},itemCount:f,subtotal:x,coupon:m,applyCoupon:e=>{p(e),a({title:"Coupon Applied",description:"You saved with code ".concat(e.code,"!")})},removeCoupon:()=>{p(null),a({title:"Coupon Removed",description:"The discount has been removed."})},discountAmount:y,total:g},children:t})},c=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},91721:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,4277,2746,9934,3977,6602,5152,6766,5521,6072,1232,5883,9123,1990,7911,8441,1684,7358],()=>t(72534)),_N_E=e.O()}]);