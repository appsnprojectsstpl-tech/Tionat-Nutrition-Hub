(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7581],{4186:(e,r,s)=>{"use strict";s.d(r,{AdminSidebar:()=>A});var n=s(95155),t=s(6874),a=s.n(t),i=s(18186),o=s(10469),l=s(87374),d=s(42625),c=s(50286),m=s(16923),u=s(98917),f=s(37830),h=s(45727),x=s(12115),b=s(78082),p=s(59434);let g=b.Kq,j=b.bL,v=b.l9,w=x.forwardRef((e,r)=>{let{className:s,sideOffset:t=4,...a}=e;return(0,n.jsx)(b.UC,{ref:r,sideOffset:t,className:(0,p.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})});w.displayName=b.UC.displayName;var y=s(35695);let N=[{href:"/",icon:i.A,label:"Home"},{href:"/admin",icon:o.A,label:"Dashboard"},{href:"/admin/products",icon:l.A,label:"Products"},{href:"/admin/orders",icon:d.A,label:"Orders"},{href:"/admin/users",icon:c.A,label:"Users"},{href:"/admin/import",icon:m.A,label:"Bulk Import"},{href:"/admin/loyalty",icon:u.A,label:"Loyalty"},{href:"/admin/coupons",icon:f.A,label:"Coupons"},{href:"/admin/seed",icon:h.A,label:"Seed Data"}];function A(){let e=(0,y.usePathname)(),r=function(){let[e,r]=x.useState(!1);return x.useEffect(()=>{function e(){r(window.innerWidth<768)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),s=[{href:"/admin",icon:o.A,label:"Dashboard"},{href:"/admin/products",icon:l.A,label:"Products"},{href:"/admin/orders",icon:d.A,label:"Orders"},{href:"/admin/coupons",icon:f.A,label:"Coupons"},{href:"/admin/users",icon:c.A,label:"Customers"},{href:"/",icon:i.A,label:"Home"}];return r?(0,n.jsx)("div",{className:"fixed bottom-0 left-0 z-50 w-full h-16 bg-background border-t",children:(0,n.jsx)("div",{className:"grid h-full max-w-lg grid-cols-5 mx-auto font-medium",children:s.map(r=>{let s=e===r.href;return(0,n.jsxs)(a(),{href:r.href,className:(0,p.cn)("inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group",s?"text-primary":"text-muted-foreground"),children:[(0,n.jsx)(r.icon,{className:"w-5 h-5 mb-1"}),(0,n.jsx)("span",{className:"text-xs",children:r.label})]},r.label)})})}):(0,n.jsx)("aside",{className:"fixed inset-y-0 left-0 z-10 hidden w-14 flex-col border-r bg-background sm:flex",children:(0,n.jsx)(g,{children:(0,n.jsx)("nav",{className:"flex flex-col items-center gap-4 px-2 sm:py-5",children:N.map(r=>{let s=e===r.href;return(0,n.jsxs)(j,{children:[(0,n.jsx)(v,{asChild:!0,children:(0,n.jsxs)(a(),{href:r.href,className:(0,p.cn)("flex h-9 w-9 items-center justify-center rounded-lg transition-colors md:h-8 md:w-8",s?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,n.jsx)(r.icon,{className:"h-5 w-5"}),(0,n.jsx)("span",{className:"sr-only",children:r.label})]})}),(0,n.jsx)(w,{side:"right",children:r.label})]},r.label)})})})})}},11321:(e,r,s)=>{"use strict";s.d(r,{AdminGuard:()=>d});var n=s(95155),t=s(12115),a=s(35695),i=s(40768),o=s(35317),l=s(50172);function d(e){let{children:r}=e,{user:s,isUserLoading:d}=(0,i.useAuth)(),c=(0,a.useRouter)(),m=(0,i.useFirestore)(),[u,f]=(0,t.useState)("loading");return((0,t.useEffect)(()=>{if(d)return;if(!s)return void c.push("/login?redirect=/admin");if(!m)return;f("loading");let e=(0,o.onSnapshot)((0,o.doc)(m,"users",s.uid),e=>{if(e.exists()){let r=e.data();f("admin"===r.role||"superadmin"===r.role?"authorized":"unauthorized")}else f("unauthorized")},e=>{console.error(e),f("unauthorized")});return()=>e()},[s,d,m,c]),"loading"===u)?(0,n.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,n.jsx)(l.A,{className:"h-8 w-8 animate-spin text-primary"})}):"unauthorized"===u?(0,n.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-center gap-4 text-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Access Denied"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"You do not have permission to view this page."}),(0,n.jsx)("button",{onClick:()=>c.push("/"),className:"rounded bg-primary px-4 py-2 text-primary-foreground hover:bg-primary/90",children:"Go Home"})]}):(0,n.jsx)(n.Fragment,{children:r})}},95005:(e,r,s)=>{Promise.resolve().then(s.bind(s,11321)),Promise.resolve().then(s.bind(s,4186))}},e=>{var r=r=>e(e.s=r);e.O(0,[8042,2992,1439,3644,4277,7337,9934,3977,5152,5733,9123,8441,1684,7358],()=>r(95005)),_N_E=e.O()}]);