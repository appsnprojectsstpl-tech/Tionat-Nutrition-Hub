(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7581],{4186:(e,r,s)=>{"use strict";s.d(r,{AdminSidebar:()=>y});var a=s(95155),n=s(6874),i=s.n(n),t=s(18186),l=s(10469),d=s(87374),o=s(42625),c=s(50286),m=s(16923),u=s(98917),f=s(37830),h=s(45727),b=s(12115),x=s(78082),p=s(59434);let g=x.Kq,j=x.bL,v=x.l9,w=b.forwardRef((e,r)=>{let{className:s,sideOffset:n=4,...i}=e;return(0,a.jsx)(x.UC,{ref:r,sideOffset:n,className:(0,p.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})});w.displayName=x.UC.displayName;var A=s(35695);let N=[{href:"/",icon:t.A,label:"Home"},{href:"/admin",icon:l.A,label:"Dashboard"},{href:"/admin/products",icon:d.A,label:"Products"},{href:"/admin/orders",icon:o.A,label:"Orders"},{href:"/admin/users",icon:c.A,label:"Users"},{href:"/admin/import",icon:m.A,label:"Bulk Import"},{href:"/admin/loyalty",icon:u.A,label:"Loyalty"},{href:"/admin/coupons",icon:f.A,label:"Coupons"},{href:"/admin/seed",icon:h.A,label:"Seed Data"}];function y(){let e=(0,A.usePathname)(),r=function(){let[e,r]=b.useState(!1);return b.useEffect(()=>{function e(){r(window.innerWidth<768)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),s=[{href:"/admin",icon:l.A,label:"Dashboard"},{href:"/admin/products",icon:d.A,label:"Products"},{href:"/admin/orders",icon:o.A,label:"Orders"},{href:"/admin/coupons",icon:f.A,label:"Coupons"},{href:"/admin/users",icon:c.A,label:"Customers"},{href:"/",icon:t.A,label:"Home"}];return r?(0,a.jsx)("div",{className:"fixed bottom-0 left-0 z-50 w-full h-16 bg-background border-t",children:(0,a.jsx)("div",{className:"grid h-full max-w-lg grid-cols-5 mx-auto font-medium",children:s.map(r=>{let s=e===r.href;return(0,a.jsxs)(i(),{href:r.href,className:(0,p.cn)("inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group",s?"text-primary":"text-muted-foreground"),children:[(0,a.jsx)(r.icon,{className:"w-5 h-5 mb-1"}),(0,a.jsx)("span",{className:"text-xs",children:r.label})]},r.label)})})}):(0,a.jsx)("aside",{className:"fixed inset-y-0 left-0 z-10 hidden w-14 flex-col border-r bg-background sm:flex",children:(0,a.jsx)(g,{children:(0,a.jsx)("nav",{className:"flex flex-col items-center gap-4 px-2 sm:py-5",children:N.map(r=>{let s=e===r.href;return(0,a.jsxs)(j,{children:[(0,a.jsx)(v,{asChild:!0,children:(0,a.jsxs)(i(),{href:r.href,className:(0,p.cn)("flex h-9 w-9 items-center justify-center rounded-lg transition-colors md:h-8 md:w-8",s?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(r.icon,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:r.label})]})}),(0,a.jsx)(w,{side:"right",children:r.label})]},r.label)})})})})}},11321:(e,r,s)=>{"use strict";s.d(r,{AdminGuard:()=>o});var a=s(95155),n=s(12115),i=s(35695),t=s(40768),l=s(35317),d=s(50172);function o(e){let{children:r}=e,{user:s,isUserLoading:o}=(0,t.useAuth)(),c=(0,i.useRouter)(),m=(0,t.useFirestore)(),u=(0,t.useMemoFirebase)(()=>m&&s?(0,l.doc)(m,"users",s.uid):null,[m,s]),{data:f,isLoading:h}=(0,t.useDoc)(u),b=o||h,[x,p]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{if(!b){if(!s)return void c.push("/login?redirect=/admin");f?"admin"===f.role||"superadmin"===f.role?p(!0):c.push("/"):h||c.push("/")}},[s,f,b,c,h]),b||!x)?(0,a.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,a.jsx)(d.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,a.jsx)(a.Fragment,{children:r})}},95005:(e,r,s)=>{Promise.resolve().then(s.bind(s,11321)),Promise.resolve().then(s.bind(s,4186))}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,3644,4277,6523,9934,3977,5152,5733,9123,8441,1684,7358],()=>r(95005)),_N_E=e.O()}]);